$(document).ready(function(){

    const HUNDRED_PERCENT = 100;
    const TIMER = 5000;
    const SHOW_PROGRESS_BAR = true;

    const MARGINAL = 1;
    const AVERAGE = 2;
    const HIGH = 3;
    const MAX_DECIMAL = 2;

    $(document).on("click","#calculateAccess", function(){
        const PERCENTAGE = 0.45;
        var accessSchoolYear1 = $("#id_school_year_one")
        var accessSchoolYear2 = $("#id_school_year_two")
        var accessSchoolYear3 = $("#id_school_year_three")

        var average = $("#id_average")
        var increase_one = $("#id_enrollment_increase_one")
        var increase_two = $("#id_enrollment_increase_two")
        var increase_three = $("#id_enrollment_increase_three")
        var final_result = $("#id_final_result")
        var percent_two = $("#id_percent_increase_two")
        var percent_three = $("#id_percent_increase_three")
  
  
        if(increase_one.val() == "" || increase_two.val() == "" || increase_three.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All enrollment increase per school year are required",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }
        
        if(accessSchoolYear1.val() === accessSchoolYear2.val() || accessSchoolYear2.val() === accessSchoolYear3.val()){
            Swal.fire({
                title:"Invalid fields",
                text: "School year must be different to each other,please try again.",
                icon: "warning",
                timer: TIMER,
                timerProgressBar: SHOW_PROGRESS_BAR,
            });
            return;
        }

        var inc_one = ((parseInt(increase_two.val()) - parseInt(increase_one.val())) / parseInt(increase_one.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var inc_two = ((parseInt(increase_three.val()) - parseInt(increase_two.val())) / parseInt(increase_two.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var average_val = ((parseFloat(inc_one) + parseFloat(inc_two)) / 2).toFixed(MAX_DECIMAL)
        percent_two.val(inc_one)
        percent_three.val(inc_two)
        average.val(average_val)


        if(average_val <= 4.99){
          final_result.val(MARGINAL * PERCENTAGE)
        }
  
        if(average_val >= 5.00 && average_val <= 6.0){
          final_result.val(AVERAGE * PERCENTAGE)
        }
  
        if(average_val >= 7.0){
          final_result.val(HIGH * PERCENTAGE)
        }
  
      });

      $(document).on("click","#calculateDropout", function(){
        
        var dropout_schoolyear1 = $("#id_drop_school_year_one")
        var dropout_schoolyear2 = $("#id_drop_school_year_two")
        var dropout_schoolyear3 = $("#id_drop_school_year_three")

        var dropout_average = $("#id_drop_average")
        var dropoutrate_one = $("#id_drop_dropoutrate_one")
        var dropoutrate_two = $("#id_drop_dropoutrate_two")
        var dropoutrate_three = $("#id_drop_dropoutrate_three")
        var percent_decrease = $("#id_drop_percent_decrease")
        var percent_two = $("#id_drop_percent_increase_two")
        var percent_three = $("#id_drop_percent_increase_three")
        var dropoutbaseline_status = $("#id_dropout_base_line_status")

  
  
        if(dropoutrate_one.val() == "" || dropoutrate_two.val() == "" || dropoutrate_three.val() == ""){
          Swal.fire({
            title:"Required fields",
            text: "All school year dropout rates are required,please try again.",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }

        if(dropout_schoolyear1.val() === dropout_schoolyear2.val() || dropout_schoolyear2.val() === dropout_schoolyear3.val()){
            Swal.fire({
                title:"Invalid fields",
                text: "School year must be different to each other,please try again.",
                icon: "warning",
                timer: TIMER,
                timerProgressBar: SHOW_PROGRESS_BAR,
            });
            return;
        }
        
        var data1 = (parseFloat(dropoutrate_one.val()) - parseFloat(dropoutrate_two.val()))
        var data2 = (parseFloat(dropoutrate_two.val()) - parseFloat(dropoutrate_three.val()))
        var dropout_average_val = ((data1 + data2) / 2).toFixed(MAX_DECIMAL)
  
        percent_two.val(data1.toFixed(MAX_DECIMAL))
        percent_three.val(data2.toFixed(MAX_DECIMAL))
        dropout_average.val(((parseFloat(dropoutrate_one.val()) + parseFloat(dropoutrate_two.val()) + parseFloat(dropoutrate_three.val())) / 3).toFixed(MAX_DECIMAL))
        percent_decrease.val(dropout_average_val)
  
        if(dropout_average_val <= 2.0){
          dropoutbaseline_status.val(MARGINAL)
        }
        
        if(dropout_average_val >= 2.01 && dropout_average_val <= 4.0){
          dropoutbaseline_status.val(AVERAGE)
        }
        
        if(dropout_average_val > 4.1){
          dropoutbaseline_status.val(HIGH)
        }
  
      });


      $(document).on("click","#calculateGraduation", function(){
        var graduation_schoolyear1 = $("#id_graduation_school_year_one")
        var graduation_schoolyear2 = $("#id_graduation_school_year_two")
        var graduation_schoolyear3 = $("#id_graduation_school_year_three")
  
        var graduation_rate_one = $("#id_graduation_rate_one")
        var graduation_rate_two = $("#id_graduation_rate_two")
        var graduation_rate_three = $("#id_graduation_rate_three")
  
        var graduation_rate_average = $("#id_graduation_rate_average")
        var graduation_increase = $("#id_graduation_increase_average")
        var graduation_increase_two = $("#id_graduation_increase_per_two")
        var graduation_increase_three = $("#id_graduation_increase_per_three")
        var graduationbaseline_status = $("#id_graduation_base_line_status")
  
  
        if(graduation_rate_one.val() == "" || graduation_rate_two.val() == "" || graduation_rate_three.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All school year graduation rate fields are required, please try again.",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }

        if(graduation_schoolyear1.val() === graduation_schoolyear2.val() || graduation_schoolyear2.val() === graduation_schoolyear3.val()){
            Swal.fire({
                title:"Invalid fields",
                text: "School year must be different to each other,please try again.",
                icon: "warning",
                timer: TIMER,
                timerProgressBar: SHOW_PROGRESS_BAR,
            });
            return;
        }
  
        var data1 = ((parseFloat(graduation_rate_two.val()) - parseFloat(graduation_rate_one.val())) / parseFloat(graduation_rate_two.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var data2 = ((parseFloat(graduation_rate_three.val()) - parseFloat(graduation_rate_two.val())) / parseFloat(graduation_rate_three.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var data3 = ((parseFloat(data1) + parseFloat(data2)) / 2).toFixed(MAX_DECIMAL)
          
        graduation_increase_two.val(data1)
        graduation_increase_three.val(data2)
  
        graduation_rate_average.val((((parseFloat(graduation_rate_one.val()) + parseFloat(graduation_rate_two.val()) + parseFloat(graduation_rate_three.val()))) / 3).toFixed(MAX_DECIMAL))
  
        graduation_increase.val(data3)
          
        if(data3 <= 6.99){
          graduationbaseline_status.val(MARGINAL)
        }
        if(data3 >= 7.00 || data3 <= 9.99){
          graduationbaseline_status.val(AVERAGE)
        }
        
        if(data3 >= 10.00){
          graduationbaseline_status.val(HIGH)
        }
      });


      $(document).on("click","#calculatePromotion", function(){
        var schoolyear1 = $("#id_promotion_school_year_one")
        var schoolyear2 = $("#id_promotion_school_year_two")
        var schoolyear3 = $("#id_promotion_school_year_three")
        var rate1 = $("#id_promotion_rate_one")
        var rate2 = $("#id_promotion_rate_two")
        var rate3 = $("#id_promotion_rate_three")
  
        var promtion_rate_average = $("#id_promotion_rate_average")
        var promotion_increase_average = $("#id_promotion_increase_average")
        var promotion_inc_two = $("#id_promotion_increase_per_two")
        var promotion_inc_three = $("#id_promotion_increase_per_three")
      
        var promotion_baseline_status = $("#id_promotion_base_line_status")
  
        if(schoolyear1.val() == "" || schoolyear2.val() == "" || schoolyear3.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All school year fields are required",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }

        if(schoolyear1.val() === schoolyear2.val() || schoolyear2.val() === schoolyear3.val()){
            Swal.fire({
                title:"Invalid fields",
                text: "Promotion school year must be different to each other,please try again.",
                icon: "warning",
                timer: TIMER,
                timerProgressBar: SHOW_PROGRESS_BAR,
            });
            return;
        }
  
  
        if(rate1.val() == "" || rate2.val() == "" || rate3.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All promotion rate per school year are required",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }
        var pro_inc_two = ((parseFloat(rate2.val()) - parseFloat(rate1.val())) / parseFloat(rate2.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var pro_inc_three = ((parseFloat(rate3.val()) - parseFloat(rate2.val())) / parseFloat(rate3.val()) * HUNDRED_PERCENT).toFixed(MAX_DECIMAL)
        var increase_ave = ((parseFloat(pro_inc_two) + parseFloat(pro_inc_three)) / 2).toFixed(MAX_DECIMAL)
        promtion_rate_average.val(((parseFloat(rate1.val()) + parseFloat(rate2.val()) + parseFloat(rate3.val())) / 3).toFixed(MAX_DECIMAL))
        promotion_inc_two.val(pro_inc_two)
        promotion_inc_three.val(pro_inc_three)
        promotion_increase_average.val(increase_ave)
  
  
        var sy_dropout_ave = parseFloat($("#id_drop_percent_decrease").val())
        var sy_graduation_ave = parseFloat($("#id_graduation_increase_average").val())
        var sy_promotion_ave = parseFloat($("#id_promotion_increase_average").val())
        var sy_final_average = ((sy_dropout_ave + sy_graduation_ave + sy_promotion_ave) / 3).toFixed(MAX_DECIMAL)
  
        $("#id_sub_total").val(sy_final_average);
        
        if(increase_ave <= 6.99){
          promotion_baseline_status.val(MARGINAL)
        }
        
        if(increase_ave >= 7.00 && increase_ave <= 9.99){
          promotion_baseline_status.val(AVERAGE)
        }
        
        if(increase_ave >= 10.00){
          promotion_baseline_status.val(HIGH)
        }
  
      });


      $(document).on("click","#calculateQuality", function(){

        const PERCENTAGE = 0.3;
        var quality_school_year_one = $("#id_quality_school_year_one")
        var quality_school_year_two = $("#id_quality_school_year_two")
        var quality_school_year_three = $("#id_quality_school_year_three")
  
        var quality_rate_one = $("#id_quality_rate_one")
        var quality_rate_two = $("#id_quality_rate_two")
        var quality_rate_three = $("#id_quality_rate_three")
  
        var rate_average = $("#id_quality_rate_average")
        var rate_average_percentage = $("#id_quality_rate_average_percentage")
        var percentage_two = $("#id_quality_rate_two_percentage")
        var percentage_three = $("#id_quality_rate_three_percentage")
        var final_result = $("#id_quality_final_result")
  
  
        if(quality_school_year_one.val() == "" || quality_school_year_two.val() == "" || quality_school_year_three.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All school year fields are required, please try again.",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }

  
        if(quality_rate_one.val() == "" || quality_rate_two.val() == "" || quality_rate_three.val() == ""){
          Swal.fire({
            title: "Required fields",
            text: "All school year quality rate fields are required, please try again.",
            icon: "warning",
            timer: TIMER,
            timerProgressBar: SHOW_PROGRESS_BAR,
          });
          return;
        }
        
        if(quality_school_year_one.val() == "" || quality_school_year_two.val() == "" || quality_school_year_three.val() == ""){
            Swal.fire({
              title: "Required fields",
              text: "Quality school year must unique to each other, please try again.",
              icon: "warning",
              timer: TIMER,
              timerProgressBar: SHOW_PROGRESS_BAR,
            });
            return;
        }

        var percentage_two_val = (parseFloat(quality_rate_two.val()) - parseFloat(quality_rate_one.val()))
        var percentage_three_val = (parseFloat(quality_rate_three.val()) - parseFloat(quality_rate_two.val()))
        var rate_average_percentage_val = ((percentage_two_val + percentage_three_val) / 2).toFixed(MAX_DECIMAL)
        var rate_average_val = (parseFloat(quality_rate_one.val()) + parseFloat(quality_rate_two.val()) + parseFloat(quality_rate_three.val())) / 3
  
        percentage_two.val(percentage_two_val.toFixed(MAX_DECIMAL))
        percentage_three.val(percentage_three_val.toFixed(MAX_DECIMAL))
  
        rate_average_percentage.val(rate_average_percentage_val)
        rate_average.val(rate_average_val.toFixed(MAX_DECIMAL))
        
        if(parseFloat(rate_average_percentage_val) <= 7.99){
          final_result.val((MARGINAL * PERCENTAGE).toFixed(MAX_DECIMAL))
        }
  
        if(parseFloat(rate_average_percentage_val) >= 8.0 && parseFloat(rate_average_percentage_val) <= 9.99){
          final_result.val((AVERAGE * PERCENTAGE).toFixed(MAX_DECIMAL))
        }
  
        if(parseFloat(rate_average_percentage_val) >= 10.0){
          final_result.val((HIGH * PERCENTAGE).toFixed(MAX_DECIMAL))
        }
  
      });
});