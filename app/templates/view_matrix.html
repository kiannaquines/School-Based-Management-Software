{% extends 'base.html' %}
{% load static %}
{% block title %}Key Performance Indicator Calculator{% endblock %}
{% load app_tags %}
{% block page_header_name %}Key Performance Calculator{% endblock %}

{% block page_nav %}
<ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="#0">Key Performance Calculator</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
        KIP Calculator
    </li>
  </ol>
{% endblock %}

{% block content %}


<div class="tab-style-1 card-style mb-30">
    <nav class="nav" id="nav-tab">
      <button class="active" id="tab-1-1" data-bs-toggle="tab" data-bs-target="#tabContent-1-1">
        Determine Performance Improvement
      </button>
      <button id="tab-1-2" data-bs-toggle="tab" data-bs-target="#tabContent-1-2">
        SBM Assessment Score
      </button>
      <button id="tab-1-3" data-bs-toggle="tab" data-bs-target="#tabContent-1-3">
        Final Rating
      </button>
    </nav>

    <div class="tab-content" id="nav-tabContent1">
      <div class="tab-pane fade show active" id="tabContent-1-1">
          <div class="table-responsive">
            <style>
              #myTable{
                font-family: "Plus Jakarta Sans", sans-serif !important;
                width: 100%;
                border: 1px solid #534f4f;
              }
    
              #myTable th, td {
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
              }
            </style>
            <table id="myTable">
              <tbody>
                <!-- header -->
                <tr>
                  <td colspan="0" scope="colgroup" rowspan="2" style="text-align: center; font-weight: 500;">Thematic Area</td>
                  <td colspan="3" scope="colgroup" style="text-align: center; font-weight: 500;">Performance Indicator</td>
                  <td colspan="0" scope="colgroup" rowspan="2" style="text-align: center; font-weight: 500;">Rating & Equivalent Points</td>
                  <td colspan="2" scope="colgroup" rowspan="2" style="text-align: center; font-weight: 500;">Results</td>
                </tr>
    
                <tr>
                  <td scope="col" style="text-align: center; font-weight: 500;">School Year</td>
                  <td scope="col" style="text-align: center; font-weight: 500;">Enrollment Increase</td>
                  <td scope="col" style="text-align: center; font-weight: 500;">% Inc</td>
                </tr>
                
                <tr>
                  <td scope="col" rowspan="4" class="text-center">Access</td>
                  <td scope="col">
                    SY {{ matrix_data.access_id.school_year_one.school_year }}
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.enrollment_increase_one }}
                  </td>
                  <td scope="col" style="background-color: #ede8e8;">
                    
                  </td>
                  
                  <td scope="col" rowspan="4" style="font-size: 17px;">
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">A. Enrollment Increase</h4>
                    <span style="display: block;">1 – Marginal: At least 3% increase 
                      (3.0 – 4.99%)</span>
                    <span style="display: block;">2 – Average: At least 5% increase 
                      (5.0 - 6.99%) </span>
                    <span style="display: block;">3 – High: At least 7% increase
                      (7.0 % – up)</span>
                    
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">B. Justification based on Community <br> Mapping</h4>
                    <span style="display: block;">1 – Marginal: At least 85% increase 
                      (85 – 89.99%)</span>
                    <span style="display: block;">2 – Average: At least 90% increase 
                      (90 – 94.99%)</span>
                    <span style="display: block;">3 – High: At least 95% increase 
                      1 (95% – up)</span>
                  </td>
    
                  <td scope="col" colspan="1" rowspan="4" class="text-center">
                    {{ matrix_data.access_id.final_result }}
                  </td>
                </tr>
                <tr>
                  <td scope="col">
                    SY {{ matrix_data.access_id.school_year_two.school_year }}
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.enrollment_increase_two }}
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.percent_increase_two }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col">
                    SY {{ matrix_data.access_id.school_year_three.school_year }}
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.enrollment_increase_three }}
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.percent_increase_three }} %
                  </td>
                </tr>
            
                <tr>
                  <td colspan="2" scope="col">
                    Average
                  </td>
                  <td scope="col">
                    {{ matrix_data.access_id.average }}
                  </td>
                </tr>
    
                <!-- Eff -->
                <tr>
                  <td scope="col" rowspan="19" class="text-center">Efficiency</td>
                  <td scope="col" colspan="2">
                    Dropout Rate
                  </td>
                  <td scope="col" colspan="1">
                    % Increase
                  </td>
                  <td scope="col" rowspan="6" style="font-size: 17px;">
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">Baseline: 7.06%</h4>
                    <span style="display: block;">1 – Marginal: At most 2% decrease</span>
                    <span style="display: block;">2 – Average: At most 4% decrease</span>
                    <span style="display: block;">3 – High: Has 0 DR or more than 4% decrease</span>
                  </td>
                  <td scope="col" colspan="3" rowspan="19" class="text-center">
                    {{ matrix_data.efficiency_id.final_result }}
                  </td>
                </tr>
    
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.drop_school_year_one.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_dropoutrate_one }} %
                  </td>
                  <td scope="col" colspan="1" style="background-color: #ede8e8;">
                    
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.drop_school_year_two.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_dropoutrate_two }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_percent_increase_two }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.drop_school_year_three.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_dropoutrate_three }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_percent_increase_three }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    Average
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_average }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.drop_percent_decrease }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="2">
                    
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.dropout_base_line_status }}
                  </td>
                </tr>
    
    
                <tr>
                  <td scope="col" colspan="2">
                    Graduation Rate
                  </td>
                  <td scope="col" colspan="1">
                    % of Increase
                  </td>
                  <td scope="col" rowspan="6" style="font-size: 17px;">
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">Baseline: 75%</h4>
                    <span style="display: block;">1 – Marginal: At least 5% Increase (5.0 – 6.99%)</span>
                    <span style="display: block;">2 – Average: At least 7% Increase (7.0 – 9.99%)</span>
                    <span style="display: block;">3 – High: At least 10% Increase (10% - up) or an ave. of 95% CSR</span>
                  </td>
                </tr>
    
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.graduation_school_year_one.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_rate_one }} %
                  </td>
                  <td scope="col" colspan="1" style="background-color: #ede8e8;">
                    
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.graduation_school_year_two.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_rate_two }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_increase_per_two }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.graduation_school_year_three.school_year }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_rate_three }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_increase_per_three }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    Average
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_rate_average }} %
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_increase_average }} %
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="2">
                    
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.graduation_base_line_status }}
                  </td>
                </tr>
    
    
                <!-- Promotion -->
                <tr>
                  <td scope="col" colspan="2">
                    Promotion Rate
                  </td>
                  
                  <td scope="col" colspan="1">
                    % of Increase
                  </td>
                  <td scope="col" rowspan="6" style="font-size: 17px;">
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">Baseline: 75%</h4>
                    <span style="display: block;">1 – Marginal: At least 5% Increase (5.0 – 6.99%)</span>
                    <span style="display: block;">2 – Average: At least 7% Increase (7.0 – 9.99%)</span>
                    <span style="display: block;">3 – High: At least 10% Increase (10% - up) or an ave. of 95% CSR</span>
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.promotion_school_year_one }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_rate_one }}%
                  </td>
                  <td scope="col" colspan="1" style="background-color: #ede8e8;">
                    
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.promotion_school_year_two }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_rate_two }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_increase_per_two }}%
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.efficiency_id.promotion_school_year_three }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_rate_three }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_increase_per_three }}%
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    Average
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_rate_average }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_increase_average }}%
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="2">
                    
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.promotion_base_line_status }}
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="2">
                    Sub-total
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.efficiency_id.sub_total }}
                  </td>
                </tr>
    
                <!-- Quality -->
                <tr>
                  <td scope="col" rowspan="19">Quality</td>
                  <td scope="col" colspan="2">
                    NAT MPS
                  </td>
                  <td scope="col" colspan="1">
                    % Increase
                  </td>
              
                  <td scope="col" rowspan="5" style="font-size: 17px;">
                    <b>OPTION 1: Get % of Increase</b>
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">Elementary: Baseline: 67%</h4>
                    <span style="display: block;">1 - Marginal: At least 2% increase
                        (2.0 – 4.99%)</span>

                    <span style="display: block;">2 – Average: At least 5% increase
                        (5.0 – 6.99%)</span>

                    <span style="display: block;">3 – High: At least 7% increase
                        (7.0% - up) or at least an ave. 
                        of 75% MPS </span>
                    
                    <h4 style="font-size: 17px; color: rgb(170, 8, 8);">Secondary: Baseline: 48% </h4>
                    
                    <span style="display: block;">1 - Marginal: At least 7% increase
                        (7.0 – 7.99%)</span>
                    <span style="display: block;">2 – Average: At least 8% increase
                        (8.0 – 9.99%)</span>
                    <span style="display: block;">3 – High: At least 10% Increase 
                        (10% - up) 
                        or at least an ave. of 75% MPS</span>
                    
                    <b>OPTION 2: Get the MPS Average</b>
                    <span style="display: block;">1 – Marginal : 26 – 50%</span>
                    <span style="display: block;">2 – Average : 51 – 75%</span>
                    <span style="display: block;">3 – High : 76 – 100%</span>
                  </td>
                  <td scope="col" colspan="3"  rowspan="19" class="text-center">
                    {{ matrix_data.quality_id.quality_final_result }}
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.quality_id.quality_school_year_one }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_one }}%
                  </td>
                  <td scope="col" colspan="1" style="background-color: #ede8e8;">
                    
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.quality_id.quality_school_year_two }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_two }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_two_percentage }}%
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    SY {{ matrix_data.quality_id.quality_school_year_three }}
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_three }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_three_percentage }}%
                  </td>
                </tr>
                <tr>
                  <td scope="col" colspan="1">
                    Average
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_average }}%
                  </td>
                  <td scope="col" colspan="1">
                    {{ matrix_data.quality_id.quality_rate_average_percentage }}%
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="5" scope="colgroup" rowspan="2" style="text-align: center; font-weight: 500; text-align: start;">Sub-total</td>
                  <td colspan="2" scope="colgroup" rowspan="2" style="text-align: center; font-weight: 500;">{% performance_result matrix_data.access_id.final_result matrix_data.efficiency_id.final_result matrix_data.quality_id.quality_final_result %}</td>
                </tr>
              </tfoot>
            </table>
    
            <h6 class="mt-3 mb-3">Legends</h6>
            <table>
              <tbody>
                <tr>
                  <td style="text-align: center; font-weight: 500;">Numerical Rating Scale</td>
                  <td style="text-align: center; font-weight: 500;">Description</td>
                </tr>
                <tr>
                  <td>0.50 – 1.49</td>
                  <td>Good</td>
                </tr>
                <tr>
                  <td>1.50 – 2.49</td>
                  <td>Better</td>
                </tr>
                <tr>
                  <td>2.50 – 3.00</td>
                  <td>Best</td>
                </tr>
              </tbody>
            </table>
          </div>
      </div>
      <div class="tab-pane fade" id="tabContent-1-2">
        <table style="width: 100%;">
            <tbody>
              <tr>
                <td style="text-align: center; font-weight: 500;">SBM Principle</td>
                <td style="text-align: center; font-weight: 500;">Weight</td>
                <td style="text-align: center; font-weight: 500;" colspan="2" scope="colgroup">Cummulative Score of Validators per Principle Computation</td>
                <td style="text-align: center; font-weight: 500;">Results</td>
              </tr>
              <tr>
                <td>{{ matrix_data.leadership_id.principle }}</td>
                <td>{{ matrix_data.leadership_id.weight }} %</td>
                <td>{{ matrix_data.leadership_id.principle_score }}</td>
                <td>{{ matrix_data.leadership_id.cumulative_score }}</td>
                <td>{{ matrix_data.leadership_id.result }}</td>
              </tr>
              <tr>
                <td>{{ matrix_data.curriculum_id.principle }}</td>
                <td>{{ matrix_data.curriculum_id.weight }} %</td>
                <td>{{ matrix_data.curriculum_id.principle_score }}</td>
                <td>{{ matrix_data.curriculum_id.cumulative_score }}</td>
                <td>{{ matrix_data.curriculum_id.result }}</td>
              </tr>
              <tr>
                <td>{{ matrix_data.accountability_id.principle }}</td>
                <td>{{ matrix_data.accountability_id.weight }} %</td>
                <td>{{ matrix_data.accountability_id.principle_score }}</td>
                <td>{{ matrix_data.accountability_id.cumulative_score }}</td>
                <td>{{ matrix_data.accountability_id.result }}</td>
              </tr>
              <tr>
                <td>{{ matrix_data.management_id.principle }}</td>
                <td>{{ matrix_data.management_id.weight }} %</td>
                <td>{{ matrix_data.management_id.principle_score }}</td>
                <td>{{ matrix_data.management_id.cumulative_score }}</td>
                <td>{{ matrix_data.management_id.result }}</td>
              </tr>
              <tr>
                <td>Sub-total</td>
                <td>100%</td>
                <td colspan="2"></td>
                <td>{% assessment_result matrix_data.leadership_id.result matrix_data.curriculum_id.result matrix_data.accountability_id.result matrix_data.management_id.result %}</td>
              </tr>
            </tbody>
          </table>
          <h6 class="mt-3 mb-3">Legends</h6>
          <table>
            <tbody>
              <tr>
                <td style="text-align: center; font-weight: 500;">Numerical Rating Scale</td>
                <td style="text-align: center; font-weight: 500;">Description</td>
              </tr>
              <tr>
                <td>0.50 – 1.49</td>
                <td>Good</td>
              </tr>
              <tr>
                <td>1.50 – 2.49</td>
                <td>Better</td>
              </tr>
              <tr>
                <td>2.50 – 3.00</td>
                <td>Best</td>
              </tr>
            </tbody>
          </table>
      </div>
      <div class="tab-pane fade" id="tabContent-1-3">
        <table style="width: 100%;">
            <tbody>
              <tr>
                <td style="text-align: center; font-weight: 500;">Areas</td>
                <td style="text-align: center; font-weight: 500;">Weight</td>
                <td style="text-align: center; font-weight: 500;">Computation</td>
                <td style="text-align: center; font-weight: 500;">Result</td>
              </tr>
              <tr>
                <td>
                  {{ matrix_data.performance_id.area }}
                </td>
                <td>{{ matrix_data.performance_id.weight }}%</td>
                <td>{{ matrix_data.performance_id.rating }}</td>
                <td>{{ matrix_data.performance_id.result }}</td>
              </tr>
              <tr>
                <td>
                  {{ matrix_data.sbm_assessment_id.area }}
                </td>
                <td>{{ matrix_data.sbm_assessment_id.weight }}%</td>
                <td>{{ matrix_data.sbm_assessment_id.rating }}</td>
                <td>{{ matrix_data.sbm_assessment_id.result }}</td>
              </tr>
              <tr>
                <td>
                  TOTAL
                </td>
                <td>
                  100%
                </td>
                <td></td>
                <td>
                  {% final_rating_result matrix_data.performance_id.result matrix_data.sbm_assessment_id.result %}
                </td>
              </tr>
              <tr>
            </tbody>
          </table>

          <h6 class="mt-3 mb-3">Legends</h6>
            <table>
              <tbody>
                <tr>
                  <td style="text-align: center; font-weight: 500;">Numerical Rating Scale</td>
                  <td style="text-align: center; font-weight: 500;">Description</td>
                </tr>
                <tr>
                  <td>0.50 – 1.49</td>
                  <td>Developing</td>
                </tr>
                <tr>
                  <td>1.50 – 2.49</td>
                  <td>Maturing</td>
                </tr>
                <tr>
                  <td>2.50 – 3.00</td>
                  <td>Adavance</td>
                </tr>
              </tbody>
            </table>
      </div>
    </div>
  </div>
{% endblock %}

{% block specific_pagejs %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock %}